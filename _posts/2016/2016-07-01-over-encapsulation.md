---
layout: article
title: 不要过度封装
---

[原文](http://www.ideawu.net/blog/archives/959.html)


过度封装是程序员最容易犯的错, 因为是否过度并没有固定的数值标准, 只能是有经验的程序员基于科学的判断. 过度封装的危害十分严重, 所以必须重视, 并且极力避免.

首先, 什么是"过度封装"? 我们知道, 计算机科学领域最称为经典也是最强大的思想便是递归, 分而治之. 但是, 递归本身最重要的因素是: 结束条件. 一生二, 二生三, 三生万物, 总要有终止的条件吧? 不然一辆车不停地急驰, 你怎样上车?


新手程序员, 特别是非科班出身的文科程序员, 最容易犯了过度封装的错误的原因就是不知道何时适可而止, 脑筋往往不断地分解分解再分解问题, 最后, 你看到的就是这个调用那个, 那个引用这个, 乱七八糟毫无头绪, 三两行代码的函数比比皆是, 自以为封装抽象, 其实是拿捏不好这个度.

一旦过度封装, 直接的危害往往是写了无数行代码, 封装了N多个类, 就是看不出一个完整的功能, 因为分裂起来收不住. 即使最终把功能实现了, 代码维护性也让人不忍直视.

如何判断是否过度封装? 如何避免过度封装? 我认为, 只要掌握了一个原则, 时刻以这个原则为准绳, 那便几乎不会犯过度封装的错误.

这个原则便是"直观优先"原则, 代码逻辑以直观为最优先的原则, 其它的原则均低于此原则, 即使有一百个考虑, 如果违反了直观原则, 都必须放弃掉而优先保证直观原则.

```
我劝你最好不要装逼也别装傻, 乖乖地有理有据有逻辑地写代码, 让代码的逻辑直观起来, 不要过度封装. 
如果你内心封装的欲望太强的话, 那我劝你学学 Go 语言, 把自己的思想强加到一种自己新发明的语言上来(我估计你没那种本事). 不然, 直观优先, 不要过度封装.
```
